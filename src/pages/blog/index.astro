---
import MainLayout from '../../layouts/MainLayout.astro';
import Navigation from '../../components/Navigation.astro';
import Footer from '../../components/Footer.astro';
---

<MainLayout title="Blog | Altruismo Eficaz UPY">
  <Navigation />
  
  <main class="blog-container">
    <div class="container">
      <h1>Blog</h1>
      <p class="subtitle">Pensamientos, ideas y actualizaciones de EA UPY</p>
      
      <div class="posts-container">
        <!-- Post 1 -->
        <article class="post">
          <div class="post-header">
            <div class="profile">
              <img src="/Foto_EA_UPY.jpg" alt="EA UPY" class="avatar" />
              <div class="user-info">
                <h3>EA UPY <span class="badge">âœ¨</span></h3>
                <span class="date">20 Mar 2025</span>
              </div>
            </div>
            <div class="mood">
              <span class="mood-emoji">ðŸ˜Š</span>
              <span class="mood-text">Optimista</span>
            </div>
          </div>
          
          <h2 class="post-title">
            <a href="/blog/bienvenidos">Â¡Bienvenidos al nuevo sitio de EA UPY!</a>
          </h2>
          
          <div class="post-content">
            <p>Estamos emocionados de lanzar nuestro nuevo sitio web donde compartiremos recursos, eventos y reflexiones sobre el Altruismo Eficaz.</p>
          </div>
          
          <div class="post-image">
            <img src="/Foto_EA_UPY.jpg" alt="Equipo EA UPY" />
          </div>
          
          <div class="post-actions">
            <button class="action-btn" aria-label="Compartir">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8L6 16M18 16L6 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="6" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                <circle cx="18" cy="6" r="3" stroke="currentColor" stroke-width="2"/>
                <circle cx="18" cy="18" r="3" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="action-btn" aria-label="Me gusta">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="none" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="action-btn" aria-label="Copiar enlace">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 13.5C10.5 14 11 14.5 11.5 14.5C12 14.5 13 14.5 13.5 14C14 13.5 14 13 14 12.5C14 12 14 11.5 13.5 11C13 10.5 12 10.5 11.5 10.5C11 10.5 10.5 10 10 9.5C9.5 9 9.5 8.5 9.5 8C9.5 7.5 10 6.5 10.5 6.5C11 6.5 11.5 6.5 12 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M15 6.5L14 5.5C12.8954 4.39543 11 5.19696 11 6.82843V7.5V8.17157C11 8.70201 10.7893 9.21071 10.4142 9.58579C10.0391 9.96086 9.53033 10.1716 9 10.1716H8.5C7.94772 10.1716 7.5 10.6193 7.5 11.1716V12.8284C7.5 13.3807 7.94772 13.8284 8.5 13.8284H9C9.53033 13.8284 10.0391 14.0391 10.4142 14.4142C10.7893 14.7893 11 15.298 11 15.8284V16.5V17.1716C11 18.803 12.8954 19.6046 14 18.5L15 17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </article>
        
        <!-- Post 2 (hardcoded) -->
        <article class="post">
          <div class="post-header">
            <div class="profile">
              <img src="/Foto_EA_UPY.jpg" alt="EA UPY" class="avatar" />
              <div class="user-info">
                <h3>EA UPY <span class="badge">âœ¨</span></h3>
                <span class="date">15 Mar 2025</span>
              </div>
            </div>
            <div class="mood">
              <span class="mood-emoji">ðŸŒ±</span>
              <span class="mood-text">Entusiasmado</span>
            </div>
          </div>
          
          <h2 class="post-title">
            <a href="/blog/evento-voluntariado">PrÃ³ximo evento de voluntariado en UPY</a>
          </h2>
          
          <div class="post-content">
            <p>Nos complace anunciar nuestro prÃ³ximo evento de voluntariado que se llevarÃ¡ a cabo en el campus de la Universidad PolitÃ©cnica de YucatÃ¡n.</p>
          </div>
          
          <div class="post-image">
            <img src="/Foto_EA_UPY.jpg" alt="Equipo EA UPY" />
          </div>
          
          <div class="post-actions">
            <button class="action-btn" aria-label="Compartir">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8L6 16M18 16L6 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="6" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                <circle cx="18" cy="6" r="3" stroke="currentColor" stroke-width="2"/>
                <circle cx="18" cy="18" r="3" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="action-btn" aria-label="Me gusta">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="none" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="action-btn" aria-label="Copiar enlace">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 13.5C10.5 14 11 14.5 11.5 14.5C12 14.5 13 14.5 13.5 14C14 13.5 14 13 14 12.5C14 12 14 11.5 13.5 11C13 10.5 12 10.5 11.5 10.5C11 10.5 10.5 10 10 9.5C9.5 9 9.5 8.5 9.5 8C9.5 7.5 10 6.5 10.5 6.5C11 6.5 11.5 6.5 12 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M15 6.5L14 5.5C12.8954 4.39543 11 5.19696 11 6.82843V7.5V8.17157C11 8.70201 10.7893 9.21071 10.4142 9.58579C10.0391 9.96086 9.53033 10.1716 9 10.1716H8.5C7.94772 10.1716 7.5 10.6193 7.5 11.1716V12.8284C7.5 13.3807 7.94772 13.8284 8.5 13.8284H9C9.53033 13.8284 10.0391 14.0391 10.4142 14.4142C10.7893 14.7893 11 15.298 11 15.8284V16.5V17.1716C11 18.803 12.8954 19.6046 14 18.5L15 17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </article>
      </div>
    </div>
  </main>

  <Footer />
</MainLayout>

<style>
  .blog-container {
    padding: 2rem 0 4rem;
    min-height: 100vh;
  }
  
  .container {
    width: 90%;
    max-width: 45rem; /* ~720px */
    margin: 0 auto;
  }
  
  h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    text-align: center;
  }
  
  .subtitle {
    text-align: center;
    color: var(--color-text-secondary);
    margin-bottom: 3rem;
  }
  
  .posts-container {
    display: flex;
    flex-direction: column;
    gap: 2.5rem;
    align-items: center;
  }
  
  .post {
    background-color: #1e1e1e;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1rem; /* 16px */
    padding: 1.6rem;
    transition: box-shadow 0.3s ease;
    position: relative;
    width: 100%;
    max-width: 85%;
    margin: 0 auto;
  }
  
  .post:hover {
    box-shadow: 0 0 0 2px var(--color-accent);
  }
  
  .post-header {
    display: flex;
    flex-direction: column;
    margin-bottom: 1.2rem;
  }
  
  .profile {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 0.5rem;
  }
  
  .avatar {
    width: 2.25rem; /* 36px */
    height: 2.25rem; /* 36px */
    border-radius: 50%;
    object-fit: cover;
  }
  
  .user-info h3 {
    font-size: 1rem;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }
  
  .badge {
    color: var(--color-accent);
  }
  
  .date {
    font-size: 0.85rem;
    color: var(--color-text-secondary);
    margin-left: 0.4rem;
  }
  
  .mood {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    background-color: rgba(139, 107, 255, 0.1);
    padding: 0.3rem 0.6rem;
    border-radius: 1rem;
    align-self: flex-start;
    margin-left: 0.4rem;
    margin-top: 0.2rem;
    font-size: 0.85rem;
  }
  
  .mood-emoji {
    font-size: 1rem;
  }
  
  .mood-text {
    font-size: 0.85rem;
    color: var(--color-text-secondary);
  }
  
  .post-title {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    line-height: 1.3;
    margin-left: 0.7rem;
    font-weight: 600;
  }
  
  .post-title a {
    color: inherit;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .post-title a:hover {
    color: var(--color-accent);
    text-decoration: none;
  }
  
  .post-content {
    margin-bottom: 1.2rem;
    margin-left: 0.7rem;
  }
  
  .post-content p {
    margin-bottom: 1rem;
    line-height: 1.6;
    color: #e0e0e0;
    font-size: 0.95rem;
  }
  
  .post-image {
    margin: 1rem auto;
    border-radius: 0.75rem; /* 12px */
    overflow: hidden;
    max-width: 90%;
  }
  
  .post-image img {
    width: 100%;
    height: auto;
    max-height: 16rem; /* ~256px */
    object-fit: cover;
  }
  
  .content-link {
    color: var(--color-accent);
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .content-link:hover {
    color: var(--color-accent-hover);
    text-decoration: underline;
  }
  
  .post-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .action-btn {
    background: transparent;
    border: none;
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: color 0.3s ease;
    padding: 0.4rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .action-btn:hover {
    color: var(--color-accent);
    background-color: rgba(139, 107, 255, 0.1);
  }
  
  @media (max-width: 48rem) { /* 768px */
    .blog-container {
      padding: 1.5rem 0 3rem;
    }
    
    .container {
      width: 90%;
    }
    
    h1 {
      font-size: 2rem;
    }
    
    .post {
      padding: 1.2rem;
      max-width: 90%;
    }
    
    .post-title {
      font-size: 1.3rem;
    }
    
    .avatar {
      width: 2rem; /* 32px */
      height: 2rem; /* 32px */
    }
    
    .post-image img {
      max-height: 14rem; /* 224px */
    }
  }
  
  @media (max-width: 30rem) { /* 480px */
    .container {
      width: 92%;
    }
    
    h1 {
      font-size: 1.8rem;
    }
    
    .subtitle {
      margin-bottom: 2rem;
    }
    
    .posts-container {
      gap: 2rem;
    }
    
    .post {
      padding: 1rem;
      max-width: 95%;
    }
    
    .post-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.8rem;
    }
    
    .mood {
      align-self: flex-start;
    }
    
    .post-title {
      font-size: 1.2rem;
    }
    
    .post-image img {
      max-height: 12rem; /* 192px */
    }
  }
</style>

<script>
  // Add interactive behavior for posts
  document.addEventListener('DOMContentLoaded', () => {
    const posts = document.querySelectorAll('.post');
    
    posts.forEach(post => {
      post.addEventListener('click', (e) => {
        // Don't trigger on buttons or links
        if (e.target.closest('button') || e.target.closest('a')) {
          return;
        }
        
        // Get the link from the post title and navigate to it
        const titleLink = post.querySelector('.post-title a');
        if (titleLink) {
          window.location.href = titleLink.getAttribute('href');
        }
        
        // Visual feedback for click
        post.style.boxShadow = `0 0 0 3px var(--color-accent)`;
        
        setTimeout(() => {
          post.style.boxShadow = '';
        }, 300);
      });
    });
    
    // Handle share button actions
    const shareButtons = document.querySelectorAll('.action-btn:first-child');
    shareButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const postEl = btn.closest('.post');
        const postLink = postEl.querySelector('.post-title a').getAttribute('href');
        const postTitle = postEl.querySelector('.post-title').textContent.trim();
        
        // Use Web Share API if available
        if (navigator.share) {
          navigator.share({
            title: postTitle,
            url: window.location.origin + postLink
          }).catch(console.error);
        } else {
          // Fallback
          // Simulate share with visual feedback
          btn.style.color = 'var(--color-accent)';
          setTimeout(() => {
            btn.style.color = '';
            alert(`Compartiendo: ${postTitle}`);
          }, 300);
        }
      });
    });
    
    // Handle like button actions
    const likeButtons = document.querySelectorAll('.action-btn:nth-child(2)');
    likeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('liked');
        
        if (btn.classList.contains('liked')) {
          btn.innerHTML = `
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="currentColor" stroke="currentColor" stroke-width="2"/>
            </svg>
          `;
          btn.style.color = '#ff5e94';
        } else {
          btn.innerHTML = `
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="none" stroke="currentColor" stroke-width="2"/>
            </svg>
          `;
          btn.style.color = '';
        }
      });
    });
    
    // Handle copy link button actions
    const copyButtons = document.querySelectorAll('.action-btn:nth-child(3)');
    copyButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const postEl = btn.closest('.post');
        const postLink = postEl.querySelector('.post-title a').getAttribute('href');
        
        // Visual feedback
        btn.style.color = 'var(--color-accent)';
        
        // Copy full URL to clipboard
        const fullUrl = `${window.location.origin}${postLink}`;
        navigator.clipboard.writeText(fullUrl).then(() => {
          setTimeout(() => {
            btn.style.color = '';
            alert('Â¡Enlace copiado al portapapeles!');
          }, 300);
        });
      });
    });
  });
</script>