---
import MainLayout from '../layouts/MainLayout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';

const { frontmatter } = Astro.props;
---

<MainLayout title={frontmatter.title + " | Altruismo Eficaz UPY"}>
  <Navigation />
  
  <main class="blog-post-container">
    <div class="blog-post-header">
      <div class="container">
        <a href="/blog" class="back-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
          </svg>
          Volver al blog
        </a>
        
        <div class="post-meta">
          <div class="date-mood">
            <span class="date">{frontmatter.date}</span>
            {frontmatter.mood && (
              <div class="mood">
                <span class="mood-emoji">{frontmatter.emoji}</span>
                <span class="mood-text">{frontmatter.mood}</span>
              </div>
            )}
          </div>
          
          <h1>{frontmatter.title}</h1>
          
          <div class="post-actions">
            <button class="action-btn share-btn" aria-label="Compartir">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8L6 16M18 16L6 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="6" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                <circle cx="18" cy="6" r="3" stroke="currentColor" stroke-width="2"/>
                <circle cx="18" cy="18" r="3" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="action-btn like-btn" aria-label="Me gusta">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="none" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="action-btn copy-link-btn" aria-label="Copiar enlace">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 13.5C10.5 14 11 14.5 11.5 14.5C12 14.5 13 14.5 13.5 14C14 13.5 14 13 14 12.5C14 12 14 11.5 13.5 11C13 10.5 12 10.5 11.5 10.5C11 10.5 10.5 10 10 9.5C9.5 9 9.5 8.5 9.5 8C9.5 7.5 10 6.5 10.5 6.5C11 6.5 11.5 6.5 12 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M15 6.5L14 5.5C12.8954 4.39543 11 5.19696 11 6.82843V7.5V8.17157C11 8.70201 10.7893 9.21071 10.4142 9.58579C10.0391 9.96086 9.53033 10.1716 9 10.1716H8.5C7.94772 10.1716 7.5 10.6193 7.5 11.1716V12.8284C7.5 13.3807 7.94772 13.8284 8.5 13.8284H9C9.53033 13.8284 10.0391 14.0391 10.4142 14.4142C10.7893 14.7893 11 15.298 11 15.8284V16.5V17.1716C11 18.803 12.8954 19.6046 14 18.5L15 17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="blog-post-content container">
      <slot />
    </div>
    
    <div class="related-posts">
      <div class="container">
        <h2>Más artículos</h2>
        <div class="related-grid">
          <a href="/blog" class="related-link">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 4L20 12L12 20L10.575 18.6L16.175 13H4V11H16.175L10.575 5.4L12 4Z" fill="currentColor"/>
            </svg>
            Ver todos los artículos
          </a>
        </div>
      </div>
    </div>
  </main>

  <Footer />
</MainLayout>

<style>
  .blog-post-container {
    min-height: 100vh;
  }
  
  .container {
    width: 90%;
    max-width: 45rem; /* ~720px */
    margin: 0 auto;
  }
  
  .blog-post-header {
    padding: 3rem 0 2rem;
    background-color: #1a1a1a;
  }
  
  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-text-secondary);
    margin-bottom: 2rem;
    transition: color 0.3s ease;
  }
  
  .back-link:hover {
    color: var(--color-accent);
    text-decoration: none;
  }
  
  .post-meta {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .date-mood {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  .date {
    font-size: 0.9rem;
    color: var(--color-text-secondary);
  }
  
  .mood {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    background-color: rgba(139, 107, 255, 0.1);
    padding: 0.3rem 0.6rem;
    border-radius: 1rem;
    font-size: 0.85rem;
  }
  
  .mood-emoji {
    font-size: 1rem;
  }
  
  .mood-text {
    font-size: 0.85rem;
    color: var(--color-text-secondary);
  }
  
  h1 {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    line-height: 1.2;
    margin: 0;
  }
  
  .post-actions {
    display: flex;
    gap: 1rem;
    margin-top: 0.5rem;
  }
  
  .action-btn {
    background: transparent;
    border: none;
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0.4rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .action-btn:hover {
    color: var(--color-accent);
    background-color: rgba(139, 107, 255, 0.1);
  }
  
  .action-btn.copied {
    color: var(--color-accent);
  }
  
  /* Estilos para el contenido del blog */
  .blog-post-content {
    padding: 3rem 0;
  }
  
  /* Estilos para los posts relacionados */
  .related-posts {
    background-color: #1a1a1a;
    padding: 3rem 0;
  }
  
  .related-posts h2 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
  }
  
  .related-grid {
    display: flex;
    justify-content: flex-end;
  }
  
  .related-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-accent);
    font-weight: 500;
    transition: all 0.3s ease;
  }
  
  .related-link:hover {
    transform: translateX(5px);
    text-decoration: none;
  }
  
  /* Media queries */
  @media (max-width: 768px) {
    .blog-post-header {
      padding: 2rem 0 1.5rem;
    }
    
    .back-link {
      margin-bottom: 1.5rem;
    }
    
    .blog-post-content {
      padding: 2rem 0;
    }
  }
  
  @media (max-width: 480px) {
    .date-mood {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.5rem;
    }
    
    .post-actions {
      margin-top: 1rem;
    }
  }
</style>

<script>
  // Scripts para la interactividad
  document.addEventListener('DOMContentLoaded', () => {
    // Manejar botón de compartir
    const shareBtn = document.querySelector('.share-btn');
    if (shareBtn) {
      shareBtn.addEventListener('click', () => {
        if (navigator.share) {
          navigator.share({
            title: document.title,
            url: window.location.href
          }).catch(console.error);
        } else {
          // Fallback si Web Share API no está disponible
          const dummy = document.createElement('input');
          document.body.appendChild(dummy);
          dummy.value = window.location.href;
          dummy.select();
          document.execCommand('copy');
          document.body.removeChild(dummy);
          alert('URL copiada al portapapeles');
        }
      });
    }
    
    // Manejar botón de me gusta
    const likeBtn = document.querySelector('.like-btn');
    if (likeBtn) {
      likeBtn.addEventListener('click', () => {
        likeBtn.classList.toggle('liked');
        
        if (likeBtn.classList.contains('liked')) {
          likeBtn.innerHTML = `
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="currentColor" stroke="currentColor" stroke-width="2"/>
            </svg>
          `;
          likeBtn.style.color = '#ff5e94';
        } else {
          likeBtn.innerHTML = `
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="none" stroke="currentColor" stroke-width="2"/>
            </svg>
          `;
          likeBtn.style.color = '';
        }
      });
    }
    
    // Manejar botón de copiar enlace
    const copyLinkBtn = document.querySelector('.copy-link-btn');
    if (copyLinkBtn) {
      copyLinkBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(window.location.href).then(() => {
          copyLinkBtn.classList.add('copied');
          setTimeout(() => {
            copyLinkBtn.classList.remove('copied');
            alert('¡Enlace copiado al portapapeles!');
          }, 300);
        }).catch(err => {
          console.error('Error al copiar:', err);
        });
      });
    }
  });
</script>